<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Array Cardio 💪</title>
  </head>
  <body>
    <p><em>这个案例是对数组原型对象上一些方法的使用的练习</em> 💁</p>
    <script>
      (function () {
        const inventors = [
          { first: "Albert", last: "Einstein", year: 1879, passed: 1955 },
          { first: "Isaac", last: "Newton", year: 1643, passed: 1727 },
          { first: "Galileo", last: "Galilei", year: 1564, passed: 1642 },
          { first: "Marie", last: "Curie", year: 1867, passed: 1934 },
          { first: "Johannes", last: "Kepler", year: 1571, passed: 1630 },
          { first: "Nicolaus", last: "Copernicus", year: 1473, passed: 1543 },
          { first: "Max", last: "Planck", year: 1858, passed: 1947 },
          { first: "Katherine", last: "Blodgett", year: 1898, passed: 1979 },
          { first: "Ada", last: "Lovelace", year: 1815, passed: 1852 },
          { first: "Sarah E.", last: "Goode", year: 1855, passed: 1905 },
          { first: "Lise", last: "Meitner", year: 1878, passed: 1968 },
          { first: "Hanna", last: "Hammarström", year: 1829, passed: 1909 },
        ];

        const people = [
          "Bernhard, Sandra",
          "Bethea, Erin",
          "Becker, Carl",
          "Bentsen, Lloyd",
          "Beckett, Samuel",
          "Blake, William",
          "Berger, Ric",
          "Beddoes, Mick",
          "Beethoven, Ludwig",
          "Belloc, Hilaire",
          "Begin, Menachem",
          "Bellow, Saul",
          "Benchley, Robert",
          "Blair, Robert",
          "Benenson, Peter",
          "Benjamin, Walter",
          "Berlin, Irving",
          "Benn, Tony",
          "Benson, Leana",
          "Bent, Silas",
          "Berle, Milton",
          "Berry, Halle",
          "Biko, Steve",
          "Beck, Glenn",
          "Bergman, Ingmar",
          "Black, Elk",
          "Berio, Luciano",
          "Berne, Eric",
          "Berra, Yogi",
          "Berry, Wendell",
          "Bevan, Aneurin",
          "Ben-Gurion, David",
          "Bevel, Ken",
          "Biden, Joseph",
          "Bennington, Chester",
          "Bierce, Ambrose",
          "Billings, Josh",
          "Birrell, Augustine",
          "Blair, Tony",
          "Beecher, Henry",
          "Biondo, Frank",
        ];

        // console.table(data) data必须是一个数组或者是一个对象，将其以表格的方式打印
        // Array.prototype.filter()
        // 1. 筛选一下出生在16世纪的发明家名单
        // filter() 方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素(return true)。
        const filDemoOne = inventors.filter((inventor) => {
          return inventor.year > 1500 && inventor.year < 1600;
        });
        console.table(filDemoOne);

        // Array.prototype.map()
        // 2. 给我们一组发明者的名字和姓氏
        // map() 方法创建一个新数组，这个新数组由原数组中的每个元素都调用一次提供的函数后的返回值组成。
        const fullNames = inventors.map((inventor) => {
          return inventor.first + " " + inventor.last;
        });
        console.table(fullNames);

        // Array.prototype.sort()
        // 3. 把发明者按生日分类，从大的到小的
        // sort() 方法用原地算法对数组的元素进行排序，并返回数组。默认排序顺序是在将元素转换为字符串
        // 如果给sort传一个排序算法就会按照你的算法进行排序,函数返回值为0顺序不变，返回值小于0则a排在b前面，返回值大于0则b被排在a前面
        const sortDemo = inventors.sort((a, b) => {
          if (a.year > b.year) {
            return 1;
          } else if (a.year < b.year) {
            return -1;
          }
          return 0;
        });
        console.table(sortDemo);
        // 三目运算符的使用
        const sortDemo1 = inventors.sort((a, b) =>
          a.year > b.year ? 1 : a.year < b.year ? -1 : 0
        );
        console.table(sortDemo1);

        // Array.prototype.reduce()
        // 4. 所有的发明家一共生活了多少年?
        // reduce() 方法对数组中的每个元素按序执行一个由您提供的 reducer 函数，每一次运行 reducer 会将先前元素的计算结果作为参数传入，最后将其结果汇总为单个返回值。
        // 参数1:自定义累加函数 参数2:累加器初始值
        const totalYears = inventors.reduce((total, inventor) => {
          return total + (inventor.passed - inventor.year);
        }, 0);
        console.table(totalYears);

        // 5. 按发明家活的岁数从少到多排序
        const oldest = inventors.sort((a, b) => {
          const lastInventor = a.passed - a.year;
          const nextInventor = b.passed - b.year;
          a.totalYear = lastInventor;
          b.totalYear = nextInventor;
          return lastInventor - nextInventor;
        });
        console.table(oldest);

        // 6.将people数组按姓氏的字母顺序排序
        const alpha = people.sort((lastOne, nextOne) => {
          const [aLast, aFirst] = lastOne.split(", ");
          const [bLast, bFirst] = nextOne.split(", ");
          return aLast > bLast ? 1 : aLast < bLast ? -1 : 0;
        });
        console.table(alpha);

        // 7. 算出每一个字符串出现的频率
        const data = [
          "car",
          "car",
          "truck",
          "truck",
          "bike",
          "walk",
          "car",
          "van",
          "bike",
          "walk",
          "car",
          "van",
          "car",
          "truck",
        ];

        const transportation = data.reduce((obj, item) => {
          if (!obj[item]) {
            obj[item] = 0;
          }
          obj[item]++;
          return obj;
        }, {});

        console.log(transportation);
      })();
    </script>
  </body>
</html>
